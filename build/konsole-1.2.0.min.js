!function(){"use strict";var e={version:"1.2.0"},t=e.prototype={};t.init=function(){this.htmlStr=['<div id="konsole-highlight"></div>','<div id="konsole">','<div class="log"><div class="log wrapped"></div></div>','<div class="cmdline"><input type="text" value="" /></div>',"</div>"].join(""),this.spacer="&nbsp;&nbsp;",this.cmds=[{name:["hide","close","x","exit"],func:e.hide,help:"Hides/Closes the Konsole."},{name:"clear",func:e.clear,help:"Clears the Konsole output."},{name:"resize",func:e.resize,help:"Resize Konsole in percent (0-100). Example: resize 22"},{name:"snap",func:t.snapKonsole,help:"Snap Konsole to any border (top,right,bottom,left). Example: snap right"},{name:"find",func:t.highlightElement,help:"Find/Highlight element(s) via selectors. Example: find p.myClass"},{name:"get",func:t.getElement,help:"Log element(s) via selectors. Example: get p.myClass"},{name:"css",func:t.modifyElementCSS,help:["This command allows various css related actions.","css bind {selector} -> Binds a element for css manipulation. Press ESC to exit this mode.","css get {selector} -> Shows the css properties for matching element(s)","css class {selector} add/remove {styleName} -> Attaches/Detaches a CSS Class from the matching element(s)"].join("\n")},{name:"overflow",func:t.findOverflow,help:"Find overflowing elements."},{name:"stats",func:t.doobStats,help:"Show FPS/MS Stats (using mrdoob/stats.js)."},{name:"report",func:t.sendReport,help:"Send a report to KonsoleReport. See Documentation for more details."},{name:"about",func:t.about,help:"About the Konsole."},{name:"help",func:t.help,help:"See Documentation for more details."}],"undefined"!=typeof $?$(document).ready(function(){var n=$("body");n.append(t.htmlStr);var o=$("#konsole"),s=o.find(".cmdline input");if(t._visible){t.isTouchDevice()&&o.addClass("touchable"),o.css("display","block"),o.find(".log.wrapped").append(t.logs.join("<br/>")),s.focus(),t.updateLogContent();var l=o.find(".log.wrapped").get(0);l.addEventListener?(l.removeEventListener("mousewheel",t.handleMouseWheel),l.removeEventListener("DOMMouseScroll",t.handleMouseWheel),l.addEventListener("mousewheel",t.handleMouseWheel,!1),l.addEventListener("DOMMouseScroll",t.handleMouseWheel,!1)):(l.detachEvent("onmousewheel",t.handleMouseWheel),l.attachEvent("onmousewheel",t.handleMouseWheel))}if(e.snap=t._konsoleSnap,t._monitoringObject&&t.updateMonitoring(),s.off("keyup").on("keyup",t.handleCmdInput),s.off("keydown").on("keydown",t.handleCmdResize),$(this).off("keypress keyup").on("keypress keyup",t.handleKeyboardEvent),t.isTouchDevice()){var i=function(){var o=$(".konsole-touch");0==o.length&&(n.append('<div class="konsole-touch"></div>'),o=$(o.selector),o.off("click").on("click",function(){t._visible?e.hide():e.show()}))};setInterval(function(){i()},2500),i()}}):console.warn("Konsole requires jQuery to be loaded in the <head> before itself.")},t.history=[],t.historyIndex=0,t.logs=[],t.logCount=0,t._monitoringObject=null,t._lastResizePercentage=.22,t._cssEditData=null,t._statsTimer=0,t._stats=null,e.key="§",e.originalEnabled=!0,e.reportingEnabled=!1,e.reportingUrl="./konsolereport/log.php",e.maxLogDepth=5,Object.defineProperty(e,"visible",{get:function(){return t._visible},set:function(t){t?e.show():e.hide()},enumerable:!0,configurable:!1}),t._visible=!1,e.enabled=!0,Object.defineProperty(e,"snap",{get:function(){return t._konsoleSnap},set:function(n){var o=$("#konsole"),s={};o.css({top:"auto",right:"auto",bottom:"auto",left:"auto"}),("left"==n||"right"==n)&&(s.top=0),("top"==n||"bottom"==n)&&(s.left=0),s[n]="bottom"==n?5:0,o.css(s),t._konsoleSnap=n,e.resize()},enumerable:!0,configurable:!1}),t._konsoleSnap="top",Object.defineProperty(e,"showErrors",{get:function(){return t._showErrors},set:function(e){e?window.addEventListener("error",t.handleGlobalError):window.removeEventListener("error",t.handleGlobalError),t._showErrors=e},enumerable:!0,configurable:!1}),t._showErrors=!1,Object.defineProperty(e,"takeOver",{get:function(){return t._takeOver},set:function(n){n?(t.isEmpty(window.console)||window.console==e||(window._console=window.console),window.console=e):(t.isEmpty(window._console)||(window.console=window._console),window._console=null),t._takeOver=n},enumerable:!0,configurable:!1}),t._takeOver=!0,e.log=function(){t.addMessage(arguments,"log")},e.info=function(){t.addMessage(arguments,"info")},e.event=function(){t.addMessage(arguments,"event")},e.error=function(){t.addMessage(arguments,"error")},e.warn=function(){t.addMessage(arguments,"warn")},e.system=function(){t.addMessage(arguments,"system")},e.observe=function(e,n){t.observeObject(e,n)},e.monitor=function(e,n){t.monitorValue(e,n)},e.sep=function(){t.addMessage(["――――――――――――――――――――"],"system")},e.separator=function(){t.addMessage(["――――――――――――――――――――"],"system")},e.show=function(){if(e.enabled){if(("interactive"==document.readyState||"complete"==document.readyState)&&!t._visible){var n=$("#konsole");0==n.length&&($("body").append(t.htmlStr),n=$(n.selector)),t.isTouchDevice()&&n.addClass("touchable");var o=n.find(".log.wrapped"),s=n.find(".cmdline input");e.resize(),o.html(""),o.append(t.logs.join("<br/>")),n.css("display","block"),s.focus(),t.updateLogContent(),s.on("keyup",t.handleCmdInput),s.on("keydown",t.handleCmdResize);var l=o.get(0);l.addEventListener?(l.removeEventListener("mousewheel",t.handleMouseWheel),l.removeEventListener("DOMMouseScroll",t.handleMouseWheel),l.addEventListener("mousewheel",t.handleMouseWheel,!1),l.addEventListener("DOMMouseScroll",t.handleMouseWheel,!1)):(l.detachEvent("onmousewheel",t.handleMouseWheel),l.attachEvent("onmousewheel",t.handleMouseWheel))}t._visible=!0}},e.hide=function(){if(e.enabled){t._visible=!1;var n=$("#konsole"),o=n.find(".cmdline input");o.off("keyup"),o.off("keydown"),n.css("display","none")}},e.clear=function(){e.enabled&&($("#konsole").find(".log.wrapped").html(""),t.logCount=0,t.logs=[])},e.resize=function(n){if(e.enabled){var o,s=$("#konsole");t._lastResizePercentage="undefined"!=typeof n?n/100:t._lastResizePercentage,"left"==t._konsoleSnap||"right"==t._konsoleSnap?(o=Math.floor(($(window).width()-40)*t._lastResizePercentage),s.css({height:"100%",width:o}),s.find(".log").css({width:o-10,height:"calc(100% - 36px)"}),s.find(".log.wrapped").css({width:o-13,height:"100%"})):(o=Math.floor(($(window).height()-40)*t._lastResizePercentage),s.css({width:"100%",height:"auto"}),s.find(".log").css({height:o,width:"calc(100% - 10px)"}),s.find(".log.wrapped").css("height",o)),t.updateLogContent()}},e.createCommand=function(e,n,o){t.cmds.push({name:e,func:n,help:t.isEmpty(o)?"No help available":o})},e.getStackLine=function(e){if(e=e||3,"undefined"!=typeof Error)try{var t,n=new Error,o=n.stack.split("\n");return e>=o.length&&(e=o.length-1),t=o[e],t=t.slice(t.indexOf("at "),t.length),t.replace(/(http.?:\/\/.*\/)/g,"").replace(/\?.+?(?=:)/g,"").replace(/\s:/," index:")}catch(n){return""}return""},e.report=function(t){if(e.reportingEnabled)try{t=t||{},t.client={agent:navigator.userAgent,language:navigator.language||navigator.userLanguage,platform:navigator.platform,version:navigator.appVersion},$.post(e.reportingUrl,{data:JSON.stringify(t)},null,"json")}catch(n){}},t.addMessage=function(n,o){if(e.enabled){var s="",l='<span class="log-system">&nbsp;</span>';if("undefined"==typeof n||null==n||1==n.length&&null==n[0])l=t.getLineNumber(),t.logToOriginalConsole(n,o),l+='<p class="log-system"><i>null</i></p>',this.logs.push(l);else if("undefined"!=typeof n){l=t.getLineNumber(),t.logToOriginalConsole(n,o);for(var i=n.length,r=0;i>r;r++){var a=n[r];r>0&&(s+=" "),s+="string"==typeof a&&t.isSimpleHtml(a)?t.prettifySimpleHtml(a):t.isArray(a)?t.prettifyArray(a):"object"==typeof a?t.prettifyObject(a):"string"==typeof a?a.replace(/\n/g,"<br/>"):a}s=s.replace(/\t/g,t.spacer),l+='<p class="log-'+o+'">'+s+"</p>",this.logs.push(l)}t._visible&&""!=s&&($("#konsole").find(".log.wrapped").append(l+"<br/>"),t.updateLogContent())}},t.removeMessage=function(e,n){n=n||1,t.logs.splice(e,n),$("#konsole").find(".log.wrapped").append(t.logs.join("<br/>")),t.updateLogContent()},t.logToOriginalConsole=function(t,n){e.originalEnabled&&"undefined"!=typeof _console&&_console&&"undefined"!=typeof t&&"undefined"!=typeof n?"undefined"!=typeof _console[n]&&"undefined"!=typeof _console[n].apply?_console[n].apply(_console,t):"undefined"!=typeof _console.log.apply&&_console.log.apply(_console,t):0==e.takeOver&&1==e.originalEnabled&&("undefined"!=typeof console[n]&&"undefined"!=typeof console[n].apply?console[n].apply(console,t):"undefined"!=typeof console.log.apply&&console.log.apply(console,t))},t.getLineNumber=function(){t.logCount++;var e=t.logCount;return t.logCount<1e3&&(e=t.padNumber(t.logCount,4)),'<span class="log-system">['+e+"] </span>"},t.updateLogContent=function(){var e=$("#konsole"),n=e.find(".log.wrapped").get(0);n&&(n.scrollTop=n.scrollHeight,e.find(".inspect").each(function(){$(this).off("mouseenter mouseleave"),$(this).hover(t.handleDOMHoverOver,t.handleDOMHoverOut)}),e.find(".inspect.full").each(function(){var e=$(this),t=e.prev();t.off("click").on("click",function(){t.css("display","none"),e.css("display","block"),n.scrollTop=n.scrollHeight,e.off("click").on("click",function(){e.css("display","none"),t.css("display","block")})})}),e.find("span.klo").off("click").on("click",function(){var e=$(this),t=e.next();e.hide(),t.show(),t.find(".klx").off("click").on("click",function(){e.show(),t.hide()})}),"undefined"!=typeof prettyPrint&&prettyPrint())},t.prettifyArray=function(n,o,s){s=s||0,s++;var l="undefined"==typeof o?"":o;o="undefined"==typeof o?t.spacer:t.spacer+o;var i="[";if(s<=e.maxLogDepth){for(var r=n.length,a=null,c=!1,d=0;r>d;d++)if(a||(a=typeof n[d]),typeof n[d]!=a){c=!0;break}for("object"!=a||c||(c=!0),i=s>1?'<span class="klo">▶ Array['+r+']</span><span class="klc"><span class="klx">▼ </span>[':"[",c&&(i+="<br/>"+o),d=0;r>d;d++)i+="object"==typeof n[d]&&"boolean"!=typeof n[d]&&"string"!=typeof n[d]&&"number"!=typeof n[d]?t.prettifyObject(n[d],o,s):"string"==typeof n[d]?'"'+n[d]+'"':n[d],!c&&r-1>d?i+=", ":r-1>d&&(i+=",<br/>"+o);return i+=c?"<br/>"+l+"​]":"]",s>1&&(i+="</span>"),i}return i+"…]"},t.prettifyObject=function(n,o,s){s=s||0,s++;var l,i=s>1?'<span class="klo">▶ Object</span><span class="klc"><span class="klx">▼ </span>{':"{",r="undefined"==typeof o?"":o;if(o="undefined"==typeof o?t.spacer:t.spacer+o,s<=e.maxLogDepth){if("object"==typeof n&&t.isXml(n))return'<code class="konsole prettyprint">'+t.prettifyXml(n)+"</code>";if("object"==typeof n&&null==n)return"null";if(t.isInDOM(n)||t.hasJQueryContext(n))return t.prettifyDOM(n);for(l in n)n.hasOwnProperty(l)&&(i+="<br/>"+o+l+": ","string"!=typeof n[l]||t.isSimpleHtml(n[l])||(i+='"'+n[l]+'"'),"string"==typeof n[l]&&t.isSimpleHtml(n[l])?i+='"'+t.prettifySimpleHtml(n[l])+'"':"number"==typeof n[l]||"boolean"==typeof n[l]?i+=n[l]:t.isArray(n[l])?i+=t.prettifyArray(n[l],o,s):t.isFunction(n[l])?i+="[object Function]":t.isObject(n[l])&&(i+=t.prettifyObject(n[l],o,s)));return i+="<br/>"+r+"​}",s>1&&(i+="</span>"),i}return i+"…}"},t.prettifySimpleHtml=function(e){return e=e.replace(/</g,"&lt;").replace(/>/,"&gt;").replace(/\n/g,"<br/>").replace(/    /g,t.spacer+t.spacer),'<code class="konsole prettyprint">'+e+"</code>"},t.prettifyXml=function(e){var n;try{n=(new XMLSerializer).serializeToString(e)}catch(o){n=e.xml}return n=n.replace("?>","?>\n").replace(/</g,"&lt;").replace(/>/,"&gt;").replace(/\n/g,"<br/>").replace(/    /g,t.spacer+t.spacer)},t.prettifyDOM=function(e){e=e.hasOwnProperty("context")||t.isArray(e)?e:[e];var n,o=e.length,s=[];for(n=0;o>n;n++){var l=e[n],i=$(l).offset(),r=l.offsetWidth,a=l.offsetHeight,c=t.prettifyXml(l);c=c.replace("<br>",""),c=c.replace(/(\s?)xmlns="http:\/\/www.w3.org\/1999\/xhtml"/g,"");var d,p="",f="",u="",m="",h=!1;try{f=c.match(/^&lt;\w+(&gt;|.*&gt;)/g)[0],d=c.match(/&lt;\/\w+>$/g),u=d&&d.length>0?d[0]:"",m=c.replace(f,"").replace(u,"")}catch(g){}"undefined"!=typeof i&&(-1!=m.indexOf("&lt;")&&(h=!0,p='<code class="konsole prettyprint inspect simple cords_'+i.left+"-"+i.top+"-"+r+"-"+a+'">'+f+"…​"+u+"</code>"),p+='<code class="konsole prettyprint inspect '+(h?"full":"")+" cords_"+i.left+"-"+i.top+"-"+r+"-"+a+'">'+c+"</code>",-1==l.className.indexOf("log-css")&&-1==l.className.indexOf("log-log")&&-1==l.className.indexOf("log-info")&&-1==l.className.indexOf("log-event")&&-1==l.className.indexOf("log-warn")&&-1==l.className.indexOf("log-system")&&-1==l.className.indexOf("log-error")&&-1==l.className.indexOf("konsole")&&-1==l.id.indexOf("konsole")&&"log"!=l.className&&"log wrapped"!=l.className&&"cmdline"!=l.className&&s.push(p))}return s.join(",<br/>")},t.retrieveCommand=function(e){if(null!=t._cssEditData)return"acss";var n,o=this.cmds,s=o.length;for(n=0;s>n;n++)if("string"==typeof o[n].name&&o[n].name==e||"string"!=typeof o[n].name&&-1!=o[n].name.indexOf(e))return o[n];return null},t.snapKonsole=function(t){e.snap=t},t.sendReport=function(t){e.report({type:"report",msg:t,callee:"User"})},t.about=function(){t.addMessage(["Konsole "+e.version+" {eatcodeplay.ch}"],"system")},t.help=function(n){if(t.isEmpty(n)){t.addMessage(["Available commands:"],"info");for(var o=[],s=t.cmds,l=s.length,i=0;l>i;i++){var r=s[i].name;"string"!=typeof r&&(r=s[i].name.join(" ")),("report"!=r||"report"==r&&e.reportingEnabled)&&o.push(r)}t.addMessage(o,"log"),t.addMessage(['Enter "help {command}" for more details'],"system")}else{var a=t.retrieveCommand(n);a&&t.addMessage([n+" -> "+a.help],"system")}},t.highlightElement=function(e){var t="#konsole ",n='[class^="konsole"] ';$(e).not(t).not(t+e).not(n).not(n+e).css("outline","2px solid #00FF00"),setTimeout(function(){$(e).css("outline","")},1500)},t.getElement=function(e){var n=null;if("undefined"==typeof e||t.isEmpty(e))$(document).on("click",function(e){e.preventDefault(),e.stopPropagation();var o=document.elementFromPoint(e.clientX,e.clientY);n==o?($(o).css("background",""),t.addMessage([$(o)],"log"),$("#konsole").find(".cmdline input").focus(),$(document).off("click")):($(o).css("background","rgba(238, 190, 68, 0.4)"),setTimeout(function(){$(o).css("background","")},800),n=o)});else{var o="#konsole ",s='[class^="konsole"] ';t.addMessage([$(e).not(o).not(o+e).not(s).not(s+e)],"log")}},t.doobStats=function(){"function"!=typeof Stats&&(console.system("Loading stats.js, just a sec.."),t.loadExternalScripts("//cdn.rawgit.com/mrdoob/stats.js/master/build/stats.min.js","doobStats"));var e=$("#stats");e.length>0?(clearInterval(t._statsTimer),t._stats=null,e.remove()):t._statsTimer=setInterval(function(){"function"==typeof Stats&&(clearInterval(t._statsTimer),t.removeMessage(-1),t._stats=new Stats,t._stats.domElement.style.position="fixed",t._stats.domElement.style.right="0",t._stats.domElement.style.top="0",t._stats.domElement.style.zIndex="100001",document.body.appendChild(t._stats.domElement),t._statsTimer=setInterval(function(){t._stats.update()},1e3/60))},100)},t.observeObject=function(n,o){if(e.enabled)if("function"==typeof Object.observe)n.name=o||n.name,console.info("Observing: "+n.name),Object.observe(n,function(e){e.forEach(function(e){var t="";"add"==e.type?t='New Property has been added to "'+e.object.name+'":':"update"==e.type?t='A Property of "'+e.object.name+'" has been updated:':"delete"==e.type&&(t='A Property of "'+e.object.name+'" has been deleted:');var n=[t,"Property&nbsp;: "+e.name,"Old Value: "+e.oldValue,"New Value: "+e.object[e.name]];"add"==e.type?n.splice(2,1):"delete"==e.type&&n.splice(3,1),console.info(n.join("\n"))})});else{console.system("Object.observe is not implemented. Loading Polyfill."),t.loadExternalScripts("//cdn.rawgit.com/MaxArt2501/object-observe/master/dist/object-observe-lite.min.js","objectObserve");var s=setInterval(function(){"function"==typeof Object.observe&&(clearInterval(s),t.observeObject(n,o))},100)}},t.monitorValue=function(n,o){e.enabled&&(t._monitoringObject||(t._monitoringObject={}),t._monitoringObject[o]=n,t.updateMonitoring())},t.updateMonitoring=function(){var e=$(".konsole-monitor");0==e.length&&($("body").append('<div class="konsole-monitor"><div class="close">X</div><div class="values"></div></div>'),e=$(e.selector),e.find(".close").off("click").on("click",function(){e.remove(),t._monitoringObject=null}),e.on("mousedown",function(t){var n=$(this).get(0);e.data({oX:n.style.right,oY:n.style.top,cX:t.clientX,cY:t.clientY}),$(window).off("mousemove").on("mousemove",function(t){var n=e.data();isNaN(n.oX)&&(n.oX=-parseFloat(n.oX)),isNaN(n.oY)&&(n.oY=parseFloat(n.oY)),e.css({right:-(n.oX+t.clientX-n.cX),top:n.oY+t.clientY-n.cY,cursor:"default"})})}),e.off("mouseup").on("mouseup",function(){$(window).off("mousemove")}));for(var n in t._monitoringObject)t._monitoringObject.hasOwnProperty(n)&&(e.find('.values div[data-konmon="'+n+'"]').length>0?e.find('.values div[data-konmon="'+n+'"]').text(n+": "+t._monitoringObject[n]):e.find(".values").append('<div data-konmon="'+n+'">'+n+": "+t._monitoringObject[n]+"</div>"))},t.findOverflow=function(){var t=document.documentElement.offsetWidth,n=!1;[].forEach.call(document.querySelectorAll("*"),function(e){e.offsetWidth>t&&(n=!0,console.log(e))}),n||e.system("No overflowing elements found")},t.modifyElementCSS=function(n){var o,s=n.split(" "),l=s.shift(),i=s.join(" ");if(null==t._cssEditData&&"bind"==l&&$(i).length>0)return t._cssEditData={selector:i},o=t.getCurrentSelectorStyles(t._cssEditData),t.logComputedStyle(o,t._cssEditData),void t.highlightElement(i);if("get"==l)return t._cssEditData={selector:i},o=t.getCurrentSelectorStyles(t._cssEditData),t.logComputedStyle(o,t._cssEditData),void(t._cssEditData=null);if("class"==l){var r,a;if(-1!=i.indexOf(" add ")?(a="add",r=i.split(" add ")):-1!=i.indexOf(" remove ")&&(a="remove",r=i.split(" remove ")),"undefined"!=typeof a){var c="#konsole ",d='[class^="konsole"] ',p=r[0],f=$(p).not(c).not(c+p).not(d).not(d+p);return void f[a+"Class"](r[1])}}e.warn("Selector returned 0 elements")},t.applyCSSBindCommands=function(e){if(e&&e.length>0){var n,o,s,l=t._cssEditData;if("highlight"==e)t.highlightElement(l.selector);else if(-1!=e.indexOf(":")){l.keyAccess=!1,n=e.split(":"),o=t.trim(n[0]),s=t.trim(n[1]).replace(/;/,""),$(l.selector).css(o.toLowerCase(),s);var i=t.getCurrentSelectorStyles(l);t.logComputedStyle(i,l)}else-1==e.indexOf(" ")&&(l.keyAccess=!0,l.keyProperty=e)}},t.getCurrentSelectorStyles=function(e){var n,o={},s=$(e.selector),l=s.attr("style"),i=s.attr("class"),r=s.attr("id"),a=[];i="undefined"!=typeof i&&""!=i?i.split(" "):[];for(var c=i.length,d=0;c>d;d++)i[d]="."+i[d];if(a=a.concat(i),c>0&&a.push(i.join("")),r){for(a.push("#"+r),d=0;c>d;d++)a.push("#"+r+i[d]);a.push("#"+r+i.join(""))}for(-1==a.indexOf(e.selector)&&a.push(e.selector),"string"==typeof e.selector&&(n=t.getCurrentClassStyles(a),e.styleName=e.selector),"object"==typeof e.selector&&(""!=e.selector.className?(n=t.getCurrentClassStyles(e.selector.className.split(" "),"."),e.styleName="."+e.selector.className.split(" ").join(".")):""!=e.selector.id?(n=t.getCurrentClassStyles(e.selector.id,"#"),e.styleName="#"+e.selector):(n=[],e.styleName="element.style")),"undefined"!=typeof l&&n.push("{"+l+"}"),c=n.length,d=0;c>d;d++)for(var p=n[d].match(/{(.*)}/)[1].split(";"),f=p.length,u=0;f>u;u++){var m=t.trim(p[u]);if(!t.isEmpty(m)){var h=m.split(":"),g=t.trim(h[0]);o[g]=t.trim(h[1]).replace(/;/,"")}}return o},t.getCurrentClassStyles=function(e,n){e="string"==typeof e?[e]:e;for(var o=[],s=e.length,l=0;s>l;l++)for(var i="undefined"!=typeof n?n+e[l]:e[l],r=document.styleSheets,a=r.length,c=0;a>c;c++){var d=r[c].rules||r[c].cssRules;o=t.getCSSStyleRules(i,d,o)}return o.length>0?o:[]},t.getCSSStyleRules=function(e,n,o){for(var s=n.length,l=0;s>l;l++)if(1==n[l].type&&n[l].selectorText==e){var i=n[l].cssText?n[l].cssText:n[l].style.cssText;o.push(i)}else if(4==n[l].type){var r=n[l].rules||n[l].cssRules;o=t.getCSSStyleRules(e,r,o)}return o},t.logComputedStyle=function(e,n){var o='<span class="selector">'+n.styleName+" </span><span>{</span><br/>";for(var s in e)if(e.hasOwnProperty(s)){var l=e[s],i=l+";";if(-1!=l.indexOf("rgb")){var r=e[s].match(/\((.+)\)/)[1].split(","),a="#"+t.c2Hex(r[0])+t.c2Hex(r[1])+t.c2Hex(r[2]);i=e[s]+'; <span class="comment"> /* '+a+" */</span>"}o+=t.spacer+'<span class="property">'+s+"</span><span>: "+i+"</span><br/>"}o+="<span>}</span>";var c=$("#konsole").find(".log.wrapped");if("undefined"==typeof n.$log){var d=t.getLineNumber();d+='<p class="log-css">'+o+"</p>",c.append(d+"<br/>"),n.$log=$(".log-css:last"),this.logs.push(d)}else n.$log.html(o),this.logs[this.logs.length-1]=n.$log.prev().get(0).outerHTML+n.$log.get(0).outerHTML;c.get(0).scrollTop=c.get(0).scrollHeight},t.isXml=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},t.isSimpleHtml=function(e){return/<[a-z][\s\S]*>/i.test(e)},t.isInDOM=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"===t.nodeName:!1},t.isArray=function(e){return!("object"!=typeof e||"[object Array]"!=={}.toString.call(e))},t.isFunction=function(e){return!("function"!=typeof e||"[object Function]"!=={}.toString.call(e))},t.isObject=function(e){return!("object"!=typeof e||"[object Object]"!=={}.toString.call(e))},t.isEmpty=function(e){return!("undefined"!=typeof e&&null!=e&&("string"!=typeof e||""!=e))},t.hasJQueryContext=function(e){return e.hasOwnProperty("context")&&t.isInDOM(e.context)?!0:!1},t.trim=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},t.padNumber=function(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e},t.c2Hex=function(e){var t=parseFloat(e).toString(16);return 1==t.length?"0"+t:t},t.isTouchDevice=function(){return"ontouchstart"in window||"onmsgesturechange"in window&&window.navigator.msMaxTouchPoints>0},t.loadExternalScripts=function(e,t){var n=document,o="script",s=n.createElement(o);s.id=t,s.src=e,n.body.appendChild(s)},t.handleCmdInput=function(e){var n=$("#konsole").find(".cmdline input");if(13==e.keyCode){var o=$(this).val(),s=o.split(" "),l=s.shift(),i=s.join(" "),r=t.retrieveCommand(l.toLowerCase());if(t.history[t.history.length-1]!=o&&t.history.push(o),t.historyIndex=t.history.length,r&&"acss"==r?t.applyCSSBindCommands(o):r&&r.func(i),!r)try{var a=$(this).val(),c=window.eval(a);void 0!=c&&t.addMessage([c],"log")}catch(d){t.addMessage(['Unknown command. Type "help" for a list of available commands.'],"system")}n.val("")}else if(1==e.ctrlKey);else if(0==e.altKey&&(38==e.keyCode||40==e.keyCode)){var p=t._cssEditData;(null==p||p&&"undefined"!=typeof p.keyAccess&&!p.keyAccess)&&(38==e.keyCode&&t.history.length>0&&t.historyIndex-1>-1?t.historyIndex--:40==e.keyCode&&t.history.length>0&&t.historyIndex+1<t.history.length&&t.historyIndex++,n.val(t.history[t.historyIndex]))}},t.handleLogMouseWheel=function(e){e=window.event||e;var t=$("#konsole").find(".log.wrapped"),n=t.scrollTop(),o=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));t.scrollTop(n-13*o)},t.handleCmdResize=function(n){var o=$("#konsole"),s=t._cssEditData;if(null!=s&&"undefined"!=typeof s.keyAccess&&s.keyAccess){var l=$(s.selector),i=l.css(s.keyProperty);if("undefined"!=typeof i){var r=i.match(/[a-z,A-Z,%]+/g),a=i.match(/[-?0-9]+/);r=r?r[0]:"",a=a?parseFloat(a[0]):0,("px"==r||"em"==r||"%"==r)&&(38==n.keyCode&&(a+=n.shiftKey?10:1),40==n.keyCode&&(a-=n.shiftKey?10:1),l.css(s.keyProperty,a+""+r),t.logComputedStyle(t.getCurrentSelectorStyles(s),s))}}else if(!n.altKey||n.ctrlKey||38!=n.keyCode&&40!=n.keyCode)if(1!=n.ctrlKey||1!=n.altKey||37!=n.keyCode&&38!=n.keyCode&&39!=n.keyCode&&40!=n.keyCode){if(!n.altKey&&n.ctrlKey&&(38==n.keyCode||40==n.keyCode)){var c=o.find(".log.wrapped")[0];c&&(38==n.keyCode?c.scrollTop-=n.shiftKey?26:13:40==n.keyCode&&(c.scrollTop+=n.shiftKey?26:13))}}else{var d;38==n.keyCode?d="top":40==n.keyCode?d="bottom":37==n.keyCode?d="left":39==n.keyCode&&(d="right"),e.snap=d}else 38==n.keyCode?t._lastResizePercentage-=n.shiftKey?.05:.005:40==n.keyCode&&(t._lastResizePercentage+=n.shiftKey?.05:.005),e.resize()},t.handleKeyboardEvent=function(n){"keypress"==n.type&&String.fromCharCode(n.which)==e.key?(n.preventDefault(),t._visible?e.hide():e.show()):27==n.keyCode&&null!=t._cssEditData&&(e.system("CSS Edit Mode deactivated"),t._cssEditData=null,$("#konsole").find(".cmdline input").focus())},t.handleGlobalError=function(t){try{var n=t.colno?t.lineno+":"+t.colno:t.lineno,o=t.message,s=t.filename.split("/").pop();e.error(o+"  <- "+s+":"+n),e.show()}catch(t){}},t.handleDOMHoverOver=function(){var e,t=$("#konsole-highlight"),n=$(this).attr("class").match(/cords_(.+)(?:\W)/);n&&n[1]&&(e=n[1].split("-")),e&&(t.css({left:e[0]+"px",top:e[1]+"px",width:e[2]+"px",height:e[3]+"px"}),t.show(),$(this).css("outline","1px dashed #777"))},t.handleDOMHoverOut=function(){$("#konsole-highlight").hide(),$(this).css("outline",0)},window.Konsole=e,e.takeOver=!0,t.init()}();